<!--pages/food-manage/index.wxml-->
<view class="container">
  <view class="header">
    <view class="title">菜品管理</view>
  </view>
  
  <!-- 添加菜品表单 -->
  <view class="add-form">
    <view class="form-title">添加新菜品</view>
    
    <view class="form-group">
      <view class="form-label">菜品名称</view>
      <input class="form-input" placeholder="请输入菜品名称" value="{{foodName}}" bindinput="onFoodNameInput" />
    </view>
    
    <view class="form-group">
      <view class="form-label">菜品描述</view>
      <input class="form-input" placeholder="请输入菜品描述" value="{{foodDesc}}" bindinput="onFoodDescInput" />
    </view>
    
    <view class="form-group">
      <view class="form-label">菜品分类</view>
      <picker class="form-picker" range="{{categories}}" value="{{categoryIndex}}" bindchange="onCategoryChange">
        <view class="picker-value">
          {{categoryIndex !== null ? categories[categoryIndex] : '请选择分类'}}
        </view>
      </picker>
    </view>
    
    <view class="form-group">
      <view class="form-label">菜品图片</view>
      <view class="image-upload" bindtap="chooseImage">
        <image wx:if="{{foodImage}}" class="preview-image" src="{{foodImage}}" mode="aspectFill"></image>
        <view wx:else class="upload-placeholder">
          <image class="upload-icon" src="../../images/icons/avatar.png"></image>
          <view class="upload-text">点击上传图片</view>
        </view>
      </view>
    </view>
    
    <button class="submit-btn" bindtap="addFood">添加菜品</button>
  </view>
  
  <!-- 菜品列表 -->
  <view class="food-list">
    <view class="list-title">我的菜品</view>
    <view 
      wx:for="{{foods}}" 
      wx:key="id" 
      class="food-item"
    >
      <image class="food-image" src="{{item.image}}" mode="aspectFill"></image>
      <view class="food-info">
        <view class="food-name">{{item.name}}</view>
        <view class="food-desc">{{item.description}}</view>
        <view class="food-category">{{item.category}}</view>
      </view>
      <button class="delete-btn" bindtap="deleteFood" data-id="{{item.id}}">删除</button>
    </view>
  </view>
  
  <!-- 空列表提示 -->
  <view class="empty-list" wx:if="{{foods.length === 0}}">
    <image src="../../images/icons/goods.png" class="empty-icon"></image>
    <view class="empty-text">暂无自定义菜品</view>
  </view>
</view>
